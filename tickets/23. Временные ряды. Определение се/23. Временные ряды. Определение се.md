# 23. Временные ряды. Определение сезонных составляющих в тренд-сезонной модели (для аддитивного и мультипликативного временных рядов). Определение тренда. Оценка качества модели.

**Временные ряды: общие понятия и структура**

**Временной ряд** — это последовательность значений уровней, которые могут содержать следующие компоненты:
* Тренд — основная тенденция развития
* Сезонная компонента — периодические колебания с периодом до 1 года
* Циклическая компонента — колебания с периодом более 1 года
* Случайная составляющая (нерегулярная компонента) — остаток после удаления тренда и периодических составляющих

**Типы моделей временных рядов:**

В зависимости от способа взаимодействия компонент выделяют:
* Аддитивная модель: представляется в виде суммы компонент
* Мультипликативная модель: представляется в виде произведения компонент
* Смешанная модель: сочетает оба принципа

Анализ и прогнозирование любого ряда всегда начинаются с построения графика для предварительного исследования его состава

**Определение тренда**

Под **трендом** понимается систематическая составляющая долговременного действия, которая определяет общее направление развития и основную тенденцию временного ряда

**Методы выявления тренда:**

Одним из наиболее распространенных приемов выявления тенденции является **сглаживание временного ряда** — замена фактических уровней расчетными, которые меньше подвержены колебаниям

* Простая скользящая средняя:
  * Применяется, если график ряда напоминает прямую
  * Суть метода: исходный ряд разбивается на участки длиной $L$ (интервал сглаживания), и центральное значение каждого участка заменяется средним арифметическим уровней этого участка
  * Чем шире интервал сглаживания, тем сильнее поглощаются колебания и тем плавнее становится тренд
  * При четной длине интервала (например, для квартальных данных $L=4$ или месячных $L=12$) используется центрирование или расчет с половинными весами для крайних точек интервала
* Взвешенная скользящая средняя:
  * Используется, когда тренд имеет изгибы («волны») и развивается нелинейно
  * Каждому уровню внутри интервала приписывается вес, зависящий от его удаления от центра участка
  * Основана на аппроксимации полиномами более высоких порядков (второго или третьего)

**Важное ограничение:** при использовании скользящих средних значения первых и последних $p$ уровней ряда теряются

**Определение сезонных составляющих**

Сезонные колебания возникают под действием природно-климатических или социальных факторов (например, предпраздничные закупки)21. Характер сезонности (аддитивный или мультипликативный) часто можно определить визуально по графику: в аддитивной модели амплитуда колебаний примерно постоянна во времени

**Алгоритм расчета для мультипликативной модели:**

1. Сглаживание: ряд сглаживается методом скользящей средней (например, с $L=12$ для месяцев) для выделения тренда $T_t$
2. Расчет отношений: определяются отношения фактических значений $y_t$ к уровням сглаженного ряда $T_t$: $x_t = y_t / T_t$. Эти значения отражают эффект сезонности и случайности
3. Элиминирование случайности: вычисляются предварительные оценки сезонной составляющей как средние значения $x_t$ для одноименных периодов (например, всех «январей») за все годы
4. Корректировка: средняя арифметическая коэффициентов за полный цикл должна быть равна 1. Проводится окончательная корректировка для нейтрализации суммарного воздействия сезонности

**Алгоритм расчета для аддитивной модели:**

Процедура аналогична, но меняются математические действия на шагах 2 и 4:
* На этапе 2 вместо деления используется вычитание: $x_t = y_t - T_t$
* На этапе 4 сумма значений сезонной составляющей за полный цикл должна быть равна нулю

**Оценка качества модели**

Проверка адекватности модели строится на анализе остаточной компоненты (разности между реальными данными и моделью)

**Критерии анализа остатков:**
* Случайность и автокорреляция: исследуется отсутствие зависимости между соседними остатками. Наиболее распространенным является критерий Дарбина-Уотсона, проверяющий гипотезу об отсутствии автокорреляции первого порядка
* Нормальность распределения: проверяется с помощью гистограмм с наложенной нормальной кривой, графиков на нормальной вероятностной бумаге или критерия Пирсона. При коротких рядах ($n < 50$) рекомендуется анализировать показатели асимметрии и эксцесса

**Показатели точности:**

Для сравнения моделей используются:
* MAPE (mean absolute percentage error) — средняя относительная ошибка аппроксимации. Значение < 10% говорит о высокой точности, 10–20% — о хорошей, 20–50% — об удовлетворительной.
* SSE (sums of squares errors) — сумма квадратов ошибок.
* MSE (mean squares errors) — средний квадрат ошибок.
